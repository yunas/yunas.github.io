function FooterScroll(){var t=this;this.footer=$(".post__footer"),this.windowHeight=$(window).height(),this.postNavigation={element:$(".post__navigation"),height:$(".post__navigation").height()},this.stickyStatus=null,this.watchForFooter=function(){if("single-post"===g.page.type){var t=this.footer[0].getBoundingClientRect();t.top+100<=this.windowHeight?"non-sticky"!==this.stickyStatus&&(this.footer.addClass("post__footer--non-sticky"),this.stickyStatus="non-sticky"):"sticky"!==this.stickyStatus&&(this.footer.removeClass("post__footer--non-sticky"),this.stickyStatus="sticky")}},this.addMarginToPost=function(){this.postNavigation.height=this.postNavigation.element.height(),$(".single-post article.post").css({"margin-bottom":t.postNavigation.height})},this.addMarginToPost(),this.scrollToPostFooter=function(){return $("body").stop().animate({scrollTop:t.footer.offset().top-t.windowHeight+t.footer.outerHeight()},629),this},Modernizr.touch||$(window).on("scroll",function(){t.watchForFooter()}),$(window).on("resize",function(){t.windowHeight=$(window).height(),t.addMarginToPost()}),$(document).on("click",'[data-js="show-entry-footer"]',function(e){t.scrollToPostFooter(),e.preventDefault()})}function HeaderImageReveal(){var t=this;this.selector="header--white-text-on-image",this.headerBg=$(".post__header__bg"),this.shouldRun=function(){return $("body").hasClass(this.selector)},$(window).on("load",function(){t.shouldRun()&&$(".post__header").addClass("post__header--fade")})}function HeaderScroll(){var t=this;this.postHeader=$(".post__header"),this.entryTitle=$('[data-js="header-scroll--initial"]'),this.postContent=$('[data-js="header-scroll--push-down"]'),this.smallTitle=$('[data-js="header-scroll--minimized"]'),this.postHeaderBg=$(".post__header__bg"),this.smallTitleHeight=this.smallTitle.outerHeight(),this.entryTitleHeight=this.entryTitle.outerHeight(),this.postHeaderHeight=this.entryTitleHeight+56,this.triggerPoint=this.postHeaderHeight-this.smallTitleHeight-10,this.offsetFactor=.25,this.baseFontSize=parseInt(this.entryTitle.css("font-size"),10),this.minFontSize=40,this.stickyStatus=null,this.statuses={entryTitle:null,postHeader:null,smallTitle:null,postHeaderBg:null,postContent:null},this.canHeaderRun=function(){for(var t=!1,e=["single-post","blog","category"],s=0;s<e.length;s++)g.page.type===e[s]&&(t=!0);return t},this.canRun=this.canHeaderRun(),this.changeHeaderSize=function(){if(this.canRun){var e=$(window).scrollTop(),s=e/this.triggerPoint;if(.5>=s){var i=2*s;this.entryTitle.css({opacity:1-i,visibility:"visible"}),"fading"!==this.statuses.entryTitle&&(this.statuses.entryTitle="fading")}else"hidden"!==this.statuses.entryTitle&&(this.entryTitle.css({opacity:0,visibility:"hidden"}),this.statuses.entryTitle="hidden");if(.75>s)"hidden"!==this.statuses.smallTitle&&(this.smallTitle.css({opacity:0}),this.statuses.smallTitle="hidden");else if(s>=.75&&1>=s){var n=4*(s-.75);this.smallTitle.css({opacity:n}),"fading"!==this.statuses.smallTitle&&(this.smallTitle.css({visibility:"visible"}),this.statuses.smallTitle="fading")}else s>1&&"visible"!==this.statuses.smallTitle&&(this.smallTitle.css({opacity:1}),this.statuses.smallTitle="visible");e>=this.triggerPoint?("fixed"!==this.statuses.postHeader&&(this.postHeader.addClass("js--fixed"),this.statuses.postHeader="fixed"),"visible"!==this.statuses.postHeaderBg&&(this.postHeaderBg.css({opacity:0}),this.statuses.postHeaderBg="visible"),"margin"!==this.statuses.postContent&&(this.postContent.css({"margin-top":t.postHeaderHeight}),this.statuses.postContent="margin")):(this.postHeaderBg.css({opacity:1-s}),this.entryTitle.css(g.utils.vendor("transform","translate(0,"+.5*e+"px)")),"fading"!==this.statuses.postHeaderBg&&(this.statuses.postHeaderBg="fading"),"no-margin"!==this.statuses.postContent&&(this.postContent.css({marginTop:0}),this.statuses.postContent="no-margin"),"not-fixed"!==this.statuses.postHeader&&(this.postHeader.removeClass("js--fixed"),this.statuses.postHeader="not-fixed"))}},Modernizr.touch||$(window).on("scroll",function(){t.canRun&&t.changeHeaderSize()}),$(window).on("resize",function(){t.smallTitleHeight=t.smallTitle.outerHeight(),t.entryTitleHeight=t.entryTitle.outerHeight(),t.postHeaderHeight=t.entryTitleHeight+56,t.triggerPoint=t.postHeaderHeight-t.smallTitleHeight-10})}function HideHeader(){var t=this;this.header=$("#masthead"),this.lastScroll=$(window).scrollTop(),this.mouseY=0,this.hiddenStatus=null,this.direction=null,this.threshold=0,this.mouseThreshold=28,this._onMouseMove=function(t){return this.mouseY=t.clientY,this.mouseY<this.mouseThreshold&&"mouse"!==this.hiddenStatus&&(this.hiddenStatus="mouse",this.header.removeClass("hide-nav")),this},this.onMouseMove=_.throttle(function(t){this._onMouseMove(t)},250),this._onMouseWheel=function(t){$(window).scrollTop();0>t?"hide"!==this.hiddenStatus&&(this.header.addClass("hide-nav"),this.hiddenStatus="hide"):t>0&&"show"!==this.hiddenStatus&&(this.header.removeClass("hide-nav"),this.hiddenStatus="show")},this.onMouseWheel=_.throttle(function(e){t._onMouseWheel(e)},150),$(document).on("mousewheel","body",function(e,s,i,n){Modernizr.csstransitions&&!Modernizr.touch&&t.onMouseWheel(n)}),$(window).on("mousemove",function(e){t.onMouseMove(e)})}function History(){if(Modernizr.history){var t=this;this.lastUrl=null,this.address={flag:null,setup:function(){$(document).on("click","[data-history]",function(t){var e=$(this).attr("href").replace(g.url.baseUrl(),"").replace(/^#/,"");$.address.loadType($(this).attr("data-history")),$.address.value(e),t.preventDefault()})},init:function(t){return t},change:function(e){null!==this.flag&&t.requestPage(e.value,$.address.loadType()),this.flag=!0}},this.address.setup(),$.address.init(function(e){t.address.init(e)}),$.address.change(function(e){t.address.change(e)}),this.requestPage=function(e,s){var i=t["load"+s];i(e)},this.loadPosts=function(e){$('<div class="loading-indicator"><span></span><i></i></div>').insertAfter(".list-wrap").velocity({opacity:1},200),$(".list-wrap").velocity({opacity:0},{duration:400,complete:function(){$(".list-wrap").load(e+" .list-wrap > *",function(e){var s=t.getTitleAndClasses(e);document.title=s.title,$("body").attr("class",s.classes);var i=$(".post__header__inner").outerHeight(),n=$(".post__header--minimized").outerHeight();i!==n&&($("#masthead").addClass("hide-nav"),$("html, body").animate({scrollTop:i-46},400)),$(".loading-indicator").velocity({opacity:0},200,function(){$(".loading-indicator").remove()}),$(".list-wrap").velocity({opacity:1},{duration:400,complete:function(){$(".list-wrap").removeAttr("style"),t.onEnterPost()}})})}})},this.getTitleAndClasses=function(t){var e={};return e.title=t.match("<title>(.*?)</title>")[1],e.classes=/body([^>]*)class=(["']+)([^"']*)(["']+)/gi.exec(t.substring(t.indexOf("<body"),t.indexOf("</body>")+7))[3],e},this.onEnterPost=function(){this.onPageEnter()},this.onPageEnter=function(){g.page.type=g.page.getType();for(var t=["infinite"],e=t.length-1;e>=0;e--)g[t[e]].onPageEnter()}}}function Infinite(){this.loadNextPage=function(){$(".list--posts").infinitescroll({itemSelector:".post--list--wrap",navSelector:".pager",nextSelector:".post-link--older a",pixelsFromNavToBottom:$(window).height(),loading:{msgText:"",finishedMsg:"End",finished:function(t){var e={path:g.url.path(),complete:g.url.baseUrl(),"new":""};"page"===e.path[e.path.length-2]&&(e.path.pop(),e.path.pop()),1===e.path.length&&""===e.path[0]&&e.path.pop();var s=e.path.length>0?"/"+e.path.join("/"):"";return e.new=e.complete+s+"/page/"+t.state.currPage,Modernizr.history,t.state.isBeyondMaxPage||t.loading.msg.fadeOut(t.loading.speed),void 0},img:"/wp-content/themes/fueled2014/assets/images/loading.svg"}})},this.onPageEnter=function(){this.loadNextPage()},this.onPageEnter()}function LinkImage(){this.linkClass="link--image",this.checkForLinkImages=function(){return $(".entry-content a").has("img").addClass(this.linkClass),$("p > iframe").parent().addClass("entry-content-asset"),this},this.onPageEnter=function(){this.checkForLinkImages()},this.onPageEnter()}function Chimp(){var t=this;this.fnames=new Array,this.fnames[0]="EMAIL",this.fnames[1]="FNAME",this.fnames[2]="LNAME",this.ftypes=new Array,this.ftypes[0]="email",this.ftypes[1]="text",this.ftypes[2]="text",this.err_style="#mc_embed_signup input.mce_inline_error{border-color:#6B0505;} #mc_embed_signup div.mce_inline_error{margin: 0 0 1em 0; padding: 5px 10px; background-color:#6B0505; font-weight: bold; z-index: 1; color:#fff;}",this.head=document.getElementsByTagName("head")[0],this.style=document.createElement("style"),this.mce_preload_checks=0,this.setStyle=function(){this.style.type="text/css",this.style.styleSheet?this.style.styleSheet.cssText=this.err_style:this.style.appendChild(document.createTextNode(this.err_style)),this.head.appendChild(t.style),setTimeout(function(){t.mce_preload_check()},250)},this.mce_preload_check=function(){if(!(this.mce_preload_checks>40)){this.mce_preload_checks++;var e=document.createElement("script");e.type="text/javascript",e.src="http://downloads.mailchimp.com/js/jquery.form-n-validate.js",this.head.appendChild(e);try{{jQuery("#fake-form").validate({})}}catch(s){return setTimeout(function(){t.mce_preload_check()},250),void 0}this.mce_init_form()}},this.mce_init_form=function(){jQuery(document).ready(function(e){var s={errorClass:"mce_inline_error",errorElement:"div",onkeyup:function(){},onfocusout:function(){},onblur:function(){}},i=e("#mc-embedded-subscribe-form").validate(s);e("#mc-embedded-subscribe-form").unbind("submit"),s={url:"http://fueled.us2.list-manage2.com/subscribe/post-json?u=142346ee122a50eedc0304359&id=6343149a1c&c=?",type:"GET",dataType:"json",contentType:"application/json; charset=utf-8",beforeSubmit:function(){return e("#mce_tmp_error_msg").remove(),e(".datefield","#mc_embed_signup").each(function(){var t=new Array,s=0;e(":text",this).each(function(){t[s]=this,s++}),e(":hidden",this).each(function(){var e=!1;2==t.length&&(e=!0,t[2]={value:1970}),this.value="MM"==t[0].value&&"DD"==t[1].value&&("YYYY"==t[2].value||e&&1970==t[2].value)?"":""==t[0].value&&""==t[1].value&&(""==t[2].value||e&&1970==t[2].value)?"":/\[day\]/.test(t[0].name)?t[1].value+"/"+t[0].value+"/"+t[2].value:t[0].value+"/"+t[1].value+"/"+t[2].value})}),e(".phonefield-us","#mc_embed_signup").each(function(){var t=new Array,s=0;e(":text",this).each(function(){t[s]=this,s++}),e(":hidden",this).each(function(){this.value=3!=t[0].value.length||3!=t[1].value.length||4!=t[2].value.length?"":"filled"})}),i.form()},success:t.mce_success_cb},e("#mc-embedded-subscribe-form").ajaxForm(s)})},this.mce_success_cb=function(e){if($("#mce-success-response").hide(),$("#mce-error-response").hide(),"success"==e.result)$("#mc-embedded-subscribe-form").each(function(){this.reset()});else{var s,n=-1;try{var o=e.msg.split(" - ",2);void 0==o[1]?s=e.msg:(i=parseInt(o[0]),i.toString()==o[0]?(n=o[0],s=o[1]):(n=-1,s=e.msg))}catch(a){n=-1,s=e.msg}try{if(-1==n)$("#mce-"+e.result+"-response").show(),$("#mce-"+e.result+"-response").html(s);else{err_id="mce_tmp_error_msg",html='<span id="'+err_id+'" style="'+t.err_style+'"> '+s+"</span>";var r="#mc_embed_signup",h=$(r);"address"==t.ftypes[n]?(r="#mce-"+t.fnames[n]+"-addr1",h=$(r).parent().parent().get(0)):"date"==ftypes[n]?(r="#mce-"+t.fnames[n]+"-month",h=$(r).parent().parent().get(0)):(r="#mce-"+t.fnames[n],h=$().parent(r).get(0)),h?($(h).append(html),$(r).focus()):($("#mce-"+e.result+"-response").show(),$("#mce-"+e.result+"-response").html(s))}}catch(a){$("#mce-"+e.result+"-response").show(),$("#mce-"+e.result+"-response").html(s)}}},this.init=function(){this.setStyle()},this.onNewPageLoad=function(){this.init()},this.init()}function Page(){this.numberOfLoads=0,this.getType=function(){for(var t,e=$("body").attr("class"),s=["single-post","home","search-results","blog","category"],i=0;i<s.length;i++)-1!==e.indexOf(s[i])&&(t=s[i]);return t},this.type=this.getType(),this.init=function(){this.type=this.getType()},this.onPageEnter=function(){return this.init(),this},this.init()}function Search(){var t=this;this.selector={redirect:'[data-js="redirect-search-form"]',hide:'[data-js="hide-search"]',show:'[data-js="show-search"]'},this.trimObject=function(t){return t[0]},this.findSearchValue=function(t){var e=this.trimObject(t);return e.value},this.redirectBrowser=function(t){Modernizr.history?"function"==typeof $.address.value&&($.address.loadType("Posts"),$.address.value("/blog/search/"+t)):window.location.href="/blog/search/"+t},this.runOnSubmit=function(t){var e=this.findSearchValue(t);this.redirectBrowser(e)},this.toggleSearchVisibility=function(t){var e=$("html").hasClass("js--search-toggled");return e?void 0:($("html").addClass("js--search-toggled"),t.preventDefault())},this.showSearch=function(t){var e=$("html").hasClass("js--search-toggled");return e?void 0:($("html").addClass("js--search-toggled"),setTimeout(function(){$("#s").focus()},300),t.preventDefault())},this.hideSearch=function(t,e){e="undefined"!=typeof e?e:!1;var s=$(t.target).closest(".form--search-list");(0===s.length||e===!0)&&$("html").removeClass("js--search-toggled")},$(document).on("submit",t.selector.redirect,function(e){var s=$(this).serializeArray();t.runOnSubmit(s),e.preventDefault()}),$(document).on("click",t.selector.show,function(e){t.showSearch(e)}),$(document).on("click",t.selector.hide,function(e){t.hideSearch(e,!0)}),$(document).on("click","body",function(e){t.hideSearch(e)})}function Toggle(){var t=this;this.navToggle=function(){$("body").hasClass("ios-accellerate")||$("body").addClass("ios-accellerate"),setTimeout(function(){$("html").toggleClass("js--show-menu"),$("body").hasClass("ios-accellerate")&&($("body").removeClass("ios-accellerate"),setTimeout(function(){},300))},10)},this.socialToggle=function(){$(".menu--social").toggleClass("js--show-social")},$(document).on("touchend click","#nav-toggle",function(e){t.navToggle(),e.preventDefault()}),$(document).on("click",".toggle--social",function(){t.socialToggle()})}function Url(){this.pathCache=[],this.domain=function(t){var e=(t?t.replace(/^https*:\/\/|(:|\/).*$/g,""):location.hostname).split("."),s=e.length;return e.slice(s-2,s).join(".")},this.section=function(){return((location.pathname.split("/")[1]||"").match(/^[^\.]*$/)||[""])[0]},this.isSecure=function(){return"https:"===location.protocol},this.params=function(t,e,s){var i=CN.utils.parseStr(e||location.search,s||"query");return t?i[t]||"":i},this.path=function(){return this.pathCache=location.pathname.match(/([^\/]+)/g)||[""],this.pathCache},this.getFragment=function(){return location.hash.substring(1)||!1},this.setFragment=function(t){return location.hash=t||"",this},this.baseUrl=function(){var t=window.location;return t.protocol+"//"+t.host},this.completeUrl=function(){var t=this.baseUrl()+"/"+this.path().join("/")+"/",e=t.substr(t.length-2);return"//"===e&&(t=t.substring(0,t.length-1)),t}}function Utils(){this.vendor=function(t,e){for(var s=["-webkit-","-moz-","-ms-","-o-"],i={},n=0;n<s.length;n++)i[s[n]+t]=e;return i[t]=e,i},this.isUndefined=function(t){return"undefined"==typeof t},this.isInViewport=function(t){var e=t.getBoundingClientRect();return e.top<=G.Size.BrowserHeight&&e.bottom>=0},this.contains=function(t,e){return t.indexOf(e)>-1},this.isNear=function(t,e,s){var i=t.getBoundingClientRect(),n=i.left-e,o=i.right+e,a=i.top-e,r=i.bottom+e,h=s.clientX,l=s.clientY;return h>n&&o>h&&l>a&&r>l},this.isAndroid=function(){return navigator.userAgent.match(/Android/i)?!0:!1},this.isMobile=function(){var t="(orientation: portrait) and (max-height: 800px) and (max-width: 480px)",e="(orientation: landscape) and (max-width: 800px) and (max-height: 480px)";return window.matchMedia(t).matches||window.matchMedia(e).matches?!0:!1}}var g=g||{};g.utils=new Utils,g.url=new Url,$(function(){Modernizr.placeholder,g.page=new Page,g.linkImages=new LinkImage,g.hideHeader=new HideHeader,g.headerScroll=new HeaderScroll,g.footerScroll=new FooterScroll,g.mailchimp=new Chimp,g.search=new Search,g.infinite=new Infinite,g.headerImageReveal=new HeaderImageReveal,g.toggle=new Toggle,g.history=new History});